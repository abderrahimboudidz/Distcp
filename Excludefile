is_excluded() {
  local path="$1"
  grep -Eq ".*\/\.Trash\/?.*" <<< "$path"
}

  # Ignorer .Trash
  if is_excluded "$FILE"; then
    log "IgnorÃ© (Trash) : $FILE"
    continue
  fi
hdfs dfs -ls -R /chemin/rep \
| grep '^-' \
| awk '{print $5, $8}' \
| sort \
| while read -r size file; do
    hdfs dfs -checksum "$file" | awk -v s="$size" -v f="$file" '{print s, f, $NF}'
  done \
| sha256sum
